<meta charset="utf-8">

<script>
function sendId(id){
	$.ajax({
		url:'/checkid',
		data:{'id': id},
		success:function(data){
			if(data == '1'){
				$('#ispan').text('사용 불가능한 ID');
			}else{
				$('#ispan').text('사용 가능한 ID');
			}
		}
	});
};

$(document).ready(function(){
	
	$('input[name="id"]').keyup(function(){
		// console.log('clicked');	확인용	
		
		var id = $(this).val();
		sendId(id);
	});
	
	// form의 내용을 보낸다.
	$('#add').click(function(){
		$('.user').attr({
			'method':'post',
			'action':'addimpl'
		});
		// form(w/class) submit
		$('.user').submit();
	});
});
</script>


<div class="col-lg-6">
    <div class="p-5">
        <div class="text-center">
            <h1 class="h4 text-gray-900 mb-4">Product Register</h1>
        </div>
        <form class="user">
            <div class="form-group">
                NAME: <input type="text" class="form-control form-control-item" name="name">
            </div>
            <div class="form-group">
                PRICE: <input type="number" class="form-control form-control-item" name="price">
            </div>
            <div class="form-group">
                CATEGORY:
                <select name="cid" class="form-control form-control-item">
                	<option th:each="c:${clist}" 
                	th:if="${c.pid != 0}"
                	th:value="${c.id}" th:text="${c.name}">
                	</option>
                </select>
            </div>
            <div class="form-group">
                IMG: <input type="file" class="form-control form-control-item" name="img">
            </div>
            
            <a id="add" href="#" class="btn btn-primary btn-user btn-block">
                ADD
            </a>
        </form>
    </div>
</div>                 